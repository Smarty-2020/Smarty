!function(r){"use strict";r(document).ready(function(){var a,i=null;function o(){r(document).on("mouseleave",".yzpr-bar,.yzpr-reacto-post",function(t){i=setTimeout(function(){r(".yzpr-bar").fadeOut()},600)}),r(document).on("mouseenter",".yzpr-bar,.yzpr-reacto-post",function(t){r(this).closest(".activity-meta, .acomment-options").append(r(".yzpr-bar")),null!==i&&clearTimeout(i),r(this).parent().find(".yzpr-bar").fadeIn(780)}),r(document).on("click",".yzpr-reacto-post",function(t){if(t.preventDefault(),r(this).find(".yzpr-post-reaction").hasClass("yzpr-no-reaction")){var a=r(".yzpr-bar").data("yz-default-reaction");r(".yzpr-bar").find('.yzpr-bar-item img[data-reaction="'+a+'"]').first().trigger("click")}else{var i=r(this).find(".yzpr-yes-reaction");i.find("img").remove(),i.removeClass("yzpr-yes-reaction").addClass("yzpr-no-reaction"),i.append('<i class="far fa-heart"></i>').hide().fadeIn(600),r(this).find(".yzpr-react-title").text(r(this).attr("data-default-title")).hide().fadeIn(600);var o={action:"yzpr_delete_post_reaction",security:r("#yzpr-post-reaction-nonce").val(),activity_id:r(this).closest(".activity-meta, .acomment-options").data("activity-id")};r.post(Youzer.ajax_url,o,function(t){if(r.parseJSON(t).error)return!1}).fail(function(t,a,i){return r.yz_DialogMsg("error",Youzer.unknown_error),!1})}})}function e(){r(document).on("click",".yzpr-bar,.yzpr-reacto-post",function(t){t.stopPropagation(),t.stopImmediatePropagation(),r(this).closest(".activity-meta, .acomment-options").append(r(".yzpr-bar")),null!==i&&clearTimeout(i),r(this).parent().find(".yzpr-bar").fadeIn(780)})}768<r(window).width()?o():e(),r(window).on("resize",function(t){void 0!==t.originalEvent&&(t.preventDefault(),clearTimeout(a),a=setTimeout(function(){(!r.browser.mobile||r(window).width()!=app.size.window_width)&&(768<r(window).width()?o():e())},250))}),r(document).on("click",".yzpr-bar img",function(t){t.stopPropagation(),t.stopImmediatePropagation(),r(".yzpr-bar").fadeOut();var a=r(this).closest(".activity-meta,.acomment-options").find(".yzpr-reacto-post"),i=a.find(".yzpr-post-reaction");i.hasClass("yzpr-yes-reaction")&&a.find("img").attr("src",r(this).attr("src")).hide().fadeIn(600),i.hasClass("yzpr-no-reaction")&&(i.removeClass("yzpr-no-reaction").addClass("yzpr-yes-reaction"),i.html('<img src="'+r(this).attr("src")+'" alt="" >').hide().fadeIn(600)),a.find(".yzpr-react-title").text(r(this).parent().attr("data-yztooltip")).hide().fadeIn(600);var o={reaction_action:"save_reaction",action:"yzpr_save_post_reaction",emoji_id:r(this).attr("data-reaction"),security:r("#yzpr-post-reaction-nonce").val(),activity_id:r(this).closest(".activity-meta,.acomment-options").data("activity-id")};r.post(Youzer.ajax_url,o,function(t){if(r.parseJSON(t).error)return!1}).fail(function(t,a,i){return r.yz_DialogMsg("error",Youzer.unknown_error),!1})}),r(document).on("click",".yz-modal-head-emoji",function(t){if(!r(this).hasClass("yz-modal-active-tab")){r(".yz-users-who-list").hide();var a=r(this).closest(".yz-modal-post-reactors");if(r(".yz-modal-head-emoji").removeClass("yz-modal-active-tab"),r(".yz-users-who-list").removeClass("yz-modal-active-list"),r(this).addClass("yz-modal-active-tab"),"true"!=r(this).attr("data-loaded")){r(this).attr("data-loaded","true"),r(".yz-users-who-list").removeClass("yz-modal-active-list"),a.find(".yz-modal-list-loader").show();var i={action:"yzpr_get_modal_tab_reactors",emoji_id:r(this).attr("data-emoji-id"),post_id:r(this).closest(".yz-modal-post-reactors").attr("data-post-id")};jQuery.post(Youzer.ajax_url,i,function(t){r(".yz-modal-active-list")[0]&&r(t).find(".yz-modal-active-list")&&(r(".yz-wall-modal-show").find(".yz-modal-reactors-head .yz-modal-active-tab").attr("data-emoji-id")!=i.emoji_id&&(t=r(t).removeClass("yz-modal-active-list")));a.find(".yz-modal-list-loader").fadeOut(100,function(){a.find(".yz-modal-active-list").removeClass("yz-modal-active-list"),a.find(".yz-wall-modal-content").append(r(t)).hide().fadeIn(400)})})}else{r(".yz-modal-list-loader")[0]&&r(".yz-modal-list-loader").fadeOut(100);var o=r(this).attr("data-emoji-id");a.find('.yz-users-who-list[data-emoji-id="'+o+'"]').fadeIn(200,function(){r(this).addClass("yz-modal-active-list")})}}}),r(document).on("click",".yz-post-reactors-list a img",function(t){r(".yz-wall-modal-overlay").fadeIn(500,function(){r(this).find(".yz-modal-loader").fadeIn(400)}),t.preventDefault();var a={action:"yzpr_get_post_reactors",emoji_id:r(this).attr("data-emoji-id"),post_id:r(this).closest(".activity-meta,.acomment-options").data("activity-id")};jQuery.post(Youzer.ajax_url,a,function(t){r("#yz-wall-modal").append(t).find(".yz-wall-modal").addClass("yz-wall-modal-show"),r(".yz-wall-modal-overlay").find(".yz-modal-loader").hide()})}),r(document).mouseup(function(t){var a=r(".yzpr-bar");a.is(t.target)||0!==a.has(t.target).length||r(".yzpr-bar").fadeOut()})})}(jQuery);